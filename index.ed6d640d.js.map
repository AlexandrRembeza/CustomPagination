{"mappings":"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","sources":["src/refs.js","src/createMoviesMarkup.js","src/index.js","src/paginationMarkups.js"],"sourcesContent":["const refs = {\n  form: document.querySelector('.form'),\n  moviesList: document.querySelector('.movies-list'),\n  paginationList: document.querySelector('.pagination-list'),\n  buttons: document.querySelectorAll('.pagination-button'),\n  prevButton: document.querySelector('.pagination-item:first-child button'),\n  nextButton: document.querySelector('.pagination-item:last-child button'),\n};\n\nexport default refs;\n","export function createMoviesMarkup(movies) {\n  return movies\n    .map(({ original_title }) => {\n      return `\n      <li class=\"movies-item\">${original_title}</li>\n    `;\n    })\n    .join('');\n}\n","import refs from './refs';\nimport { createMoviesMarkup } from './createMoviesMarkup';\nimport * as MARKUP from './paginationMarkups';\n\nconst API_KEY = '6308d1a98819d8ffdd4916cbcea5cd95';\nlet page = 1;\nlet query = 'war';\nlet totalPages = 0;\n\nasync function fetchMovies(query, page) {\n  const response = await fetch(\n    `https://api.themoviedb.org/3/search/movie?api_key=${API_KEY}&language=en-US&page=${page}&query=${query}`\n  );\n  const movies = await response.json();\n  totalPages = movies.total_pages;\n  if (totalPages === 0) return;\n  console.log(movies);\n  return movies.results;\n}\n\nfetchMovies(query, page).then(response => {\n  refs.moviesList.insertAdjacentHTML('beforeend', createMoviesMarkup(response));\n  if (totalPages <= 10) changePaginationMarkup(1, false);\n});\n\nrefs.form.addEventListener('submit', onSubmit);\nasync function onSubmit(e) {\n  e.preventDefault();\n  const value = e.currentTarget.elements.query.value.trim();\n  if (value === query) return alert('Equal request');\n  page = 1;\n  const movies = await fetchMovies(value, page);\n  if (totalPages === 0) {\n    refs.form.reset();\n    return alert('No results');\n  }\n  query = value;\n  refs.moviesList.innerHTML = '';\n  refs.moviesList.insertAdjacentHTML('beforeend', createMoviesMarkup(movies));\n  changePaginationMarkup(page, false);\n  refs.form.reset();\n}\n\nrefs.paginationList.addEventListener('click', loadNextPage);\nasync function loadNextPage(e) {\n  e.preventDefault();\n  const currentPage = Number(e.target.dataset.page);\n  if (currentPage === page) return;\n  console.log(currentPage);\n  page = currentPage;\n\n  const movies = await fetchMovies(query, page);\n  refs.moviesList.innerHTML = '';\n  refs.moviesList.insertAdjacentHTML('beforeend', createMoviesMarkup(movies));\n\n  const visible = e.target.dataset.visible ? true : false;\n  changePaginationMarkup(page, visible);\n\n  if (page > 1) refs.prevButton.removeAttribute('disabled');\n  if (page === totalPages) {\n    refs.nextButton.setAttribute('disabled', true);\n  } else {\n    refs.nextButton.removeAttribute('disabled');\n  }\n\n  refs.buttons.forEach(el => el.classList.remove('active'));\n  refs.buttons.forEach(el => {\n    if (currentPage === Number(el.dataset.page) && Number(el.textContent)) {\n      el.classList.add('active');\n    }\n  });\n}\n\nfunction changePaginationMarkup(page, visible) {\n  let paginationMarkup = '';\n\n  if (totalPages === 1) {\n    paginationMarkup = MARKUP.onePagePagination();\n    return createPaginationMarkup(paginationMarkup);\n  }\n\n  if (totalPages <= 10) {\n    paginationMarkup = MARKUP.totalPagesLessThanTenPagination(page, totalPages);\n    return createPaginationMarkup(paginationMarkup);\n  }\n\n  if (totalPages === page || page > totalPages - 8) {\n    paginationMarkup = MARKUP.lastPagesPagination(page, totalPages);\n    return createPaginationMarkup(paginationMarkup);\n  }\n\n  if (page === 1 || page < 9) {\n    paginationMarkup = MARKUP.pageLessThanNine(page);\n    return createPaginationMarkup(paginationMarkup);\n  }\n\n  if (visible) {\n    refs.prevButton.dataset.page = page - 1;\n    refs.nextButton.dataset.page = page + 1;\n    return;\n  }\n\n  if (page > 9 || page < totalPages - 8) {\n    paginationMarkup = MARKUP.betweenFirstAndLastPages(page, totalPages);\n    return createPaginationMarkup(paginationMarkup);\n  }\n}\n\nfunction createPaginationMarkup(paginationMarkup) {\n  refs.paginationList.innerHTML = '';\n  refs.paginationList.insertAdjacentHTML('beforeend', paginationMarkup);\n\n  refs.buttons = document.querySelectorAll('.pagination-button');\n  refs.prevButton = document.querySelector(\n    '.pagination-item:first-child button'\n  );\n  refs.nextButton = document.querySelector(\n    '.pagination-item:last-child button'\n  );\n}\n","export function onePagePagination() {\n  return `<li class=\"pagination-item\">\n      <button class=\"pagination-button active\" type=\"button\" data-page=\"1\">1</button>\n    </li>`;\n}\n\nexport function totalPagesLessThanTenPagination(page, totalPages) {\n  let markup = [];\n  for (let i = 1; i <= totalPages; i += 1) {\n    markup.push(`<li class=\"pagination-item\">\n      <button class=\"pagination-button ${\n        i === 1 ? 'active' : ''\n      }\" type=\"button\" data-page=\"${i}\">${i}</button>\n    </li>`);\n  }\n  return `<li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"${\n        page - 1\n      }\" disabled=\"true\">&#65124</button></li> \n      ${markup.join('')}\n      <li class=\"pagination-item\">\n      ${\n        totalPages !== 1\n          ? `<button class=\"pagination-button\" type=\"button\" data-page=\"${\n              page + 1\n            }\">&#65125</button></li>`\n          : ''\n      }`;\n}\n\nexport function lastPagesPagination(page, totalPages) {\n  return ` \n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"${\n        page - 1\n      }\" disabled=\"true\">&#65124</button></li>\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button active\" type=\"button\" data-page=\"${\n        totalPages - 8\n      }\">...</button>\n    </li>\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"${\n        totalPages - 7\n      }\">${totalPages - 7}</button>\n    </li>\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"${\n        totalPages - 6\n      }\">${totalPages - 6}</button>\n    </li>\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"${\n        totalPages - 5\n      }\">${totalPages - 5}</button>\n    </li>\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"${\n        totalPages - 4\n      }\">${totalPages - 4}</button>\n    </li>\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"${\n        totalPages - 3\n      }\">${totalPages - 3}</button>\n    </li>\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"${\n        totalPages - 2\n      }\">${totalPages - 2}</button>\n    </li>\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"${\n        totalPages - 1\n      }\">${totalPages - 1}</button>\n    </li>\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"${totalPages}\">${totalPages}</button>\n    </li>\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"${\n        page + 1\n      }\">&#65125</button></li>`;\n}\n\nexport function pageLessThanNine(page) {\n  return ` \n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"${\n        page - 1\n      }\" disabled=\"true\">&#65124</button></li>\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button active\" type=\"button\" data-page=\"1\">1</button>\n    </li>\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"2\">2</button>\n    </li>\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"3\">3</button>\n    </li>\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"4\">4</button>\n    </li>\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"5\">5</button>\n    </li>\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"6\">6</button>\n    </li>\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"7\">7</button>\n    </li>\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"8\">8</button>\n    </li>\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"9\">...</button>\n    </li>\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"${\n        page + 1\n      }\">&#65125</button></li>`;\n}\n\nexport function betweenFirstAndLastPages(page, totalPages) {\n  return `\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"${\n        page - 1\n      }\" >&#65124</button></li>\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"1\">1</button>\n    </li>\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"${\n        page - 5\n      }\">...</button>\n    </li>\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-visible data-page=\"${page}\">${page}</button>\n    </li>\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-visible=\"true\" data-page=\"${\n        page + 1\n      }\">${page + 1}</button>\n    </li>\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-visible=\"true\" data-page=\"${\n        page + 2\n      }\">${page + 2}</button>\n    </li>\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-visible=\"true\" data-page=\"${\n        page + 3\n      }\">${page + 3}</button>\n    </li>\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-visible=\"true\" data-page=\"${\n        page + 4\n      }\">${page + 4}</button>\n    </li>\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"${\n        page + 5\n      }\">...</button>\n    </li>\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"${totalPages}\">${totalPages}</button>\n    </li>\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"${\n        page + 1\n      }\">&#65125</button>\n    </li>\n  `;\n}\n"],"names":["$94aaf10e6bfe0334$export$2e2bcd8739ae039","form","document","querySelector","moviesList","paginationList","buttons","querySelectorAll","prevButton","nextButton","$8a54098b6528a565$export$e53703e81543c3b4","movies","map","original_title","join","$1f0dc3b9307be026$var$page","$1f0dc3b9307be026$var$query","$1f0dc3b9307be026$var$totalPages","async","$1f0dc3b9307be026$var$fetchMovies","query1","page1","response","fetch","json","total_pages","console","log","results","$1f0dc3b9307be026$var$changePaginationMarkup","page2","visible","paginationMarkup","$1f0dc3b9307be026$var$createPaginationMarkup","page","totalPages","markup","i","push","$4d2b3ba7ef182bde$export$55d9aebea3831d11","$4d2b3ba7ef182bde$export$acdd6fc5a69c298c","dataset","$4d2b3ba7ef182bde$export$693eb906ae7d5a97","innerHTML","insertAdjacentHTML","then","addEventListener","e","preventDefault","value","currentTarget","elements","query","trim","alert","reset","currentPage","Number","target","removeAttribute","setAttribute","forEach","el","classList","remove","textContent","add"],"version":3,"file":"index.ed6d640d.js.map"}