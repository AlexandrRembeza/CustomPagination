{"mappings":"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","sources":["src/refs.js","src/createMoviesMarkup.js","src/index.js","src/paginationMarkups.js"],"sourcesContent":["const refs = {\n  form: document.querySelector('.form'),\n  moviesList: document.querySelector('.movies-list'),\n  paginationList: document.querySelector('.pagination-list'),\n  buttons: document.querySelectorAll('.pagination-button'),\n  prevButton: document.querySelector('.pagination-item:first-child button'),\n  nextButton: document.querySelector('.pagination-item:last-child button'),\n};\n\nexport default refs;\n","export function createMoviesMarkup(movies) {\n  return movies\n    .map(({ original_title, poster_path }) => {\n      const image = poster_path\n        ? `<div class=\"movie-item__image-wrap\">                         \n                <img class=\"movie-item__image\" src=\"https://www.themoviedb.org/t/p/w780${poster_path}\" loading=\"lazy\" alt=\"${original_title}\" />\n            </div>`\n        : `<div class=\"movie-item__placeholder\">\n                <svg class=\"movie-item__placeholder-image\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n                    <title>image</title>\n                    <g id=\"icomoon-ignore\">\n                    </g>\n                    <path d=\"M479.942 64c0.020 0.017 0.041 0.038 0.058 0.058v383.885c-0.017 0.020-0.038 0.041-0.058 0.058h-447.885c-0.020-0.017-0.041-0.038-0.057-0.058v-383.886c0.017-0.020 0.038-0.041 0.057-0.057h447.885zM480 32h-448c-17.6 0-32 14.4-32 32v384c0 17.6 14.4 32 32 32h448c17.6 0 32-14.4 32-32v-384c0-17.6-14.4-32-32-32v0z\"></path>\n                    <path d=\"M416 144c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48z\"></path>\n                    <path d=\"M448 416h-384v-64l112-192 128 160h32l112-96z\"></path>\n                </svg>     \n           </div>`;\n      return `\n      <li class=\"movies-item\">\n        ${image}\n        <p>${original_title}</p>\n      </li>\n    `;\n    })\n    .join('');\n}\n","import refs from './refs';\nimport { createMoviesMarkup } from './createMoviesMarkup';\nimport * as MARKUP from './paginationMarkups';\n\nconst API_KEY = '6308d1a98819d8ffdd4916cbcea5cd95';\nlet page = 1;\nlet query = 'war';\nlet totalPages = 0;\n\nasync function fetchMovies(query, page) {\n  const response = await fetch(\n    `https://api.themoviedb.org/3/search/movie?api_key=${API_KEY}&language=en-US&page=${page}&query=${query}`\n  );\n  const movies = await response.json();\n  totalPages = movies.total_pages;\n  if (totalPages === 0) return;\n  console.log(movies);\n  return movies.results;\n}\n\nfetchMovies(query, page).then(response => {\n  refs.moviesList.insertAdjacentHTML('beforeend', createMoviesMarkup(response));\n  if (totalPages <= 10) changePaginationMarkup(1, false);\n});\n\nrefs.form.addEventListener('submit', onSubmit);\nasync function onSubmit(e) {\n  e.preventDefault();\n  const value = e.currentTarget.elements.query.value.trim();\n  if (value === query) return alert('Equal request');\n  page = 1;\n  const movies = await fetchMovies(value, page);\n  if (totalPages === 0) {\n    refs.form.reset();\n    return alert('No results');\n  }\n  query = value;\n  refs.moviesList.innerHTML = '';\n  const markup = await createMoviesMarkup(movies);\n  refs.moviesList.insertAdjacentHTML('beforeend', markup);\n  changePaginationMarkup(page, false);\n  refs.form.reset();\n}\n\nrefs.paginationList.addEventListener('click', loadNextPage);\nasync function loadNextPage(e) {\n  e.preventDefault();\n  const currentPage = Number(e.target.dataset.page);\n  if (currentPage === page) return;\n  console.log(currentPage);\n  page = currentPage;\n\n  const movies = await fetchMovies(query, page);\n  refs.moviesList.innerHTML = '';\n  const markup = await createMoviesMarkup(movies);\n  refs.moviesList.insertAdjacentHTML('beforeend', markup);\n\n  const visible = e.target.dataset.visible ? true : false;\n  changePaginationMarkup(page, visible);\n\n  if (page > 1) refs.prevButton.removeAttribute('disabled');\n  if (page === totalPages) {\n    refs.nextButton.setAttribute('disabled', true);\n  } else {\n    refs.nextButton.removeAttribute('disabled');\n  }\n\n  refs.buttons.forEach(el => el.classList.remove('active'));\n  refs.buttons.forEach(el => {\n    if (currentPage === Number(el.dataset.page) && Number(el.textContent)) {\n      el.classList.add('active');\n    }\n  });\n}\n\nfunction changePaginationMarkup(page, visible) {\n  let paginationMarkup = '';\n\n  if (totalPages === 1) {\n    paginationMarkup = MARKUP.onePagePagination();\n    return createPaginationMarkup(paginationMarkup);\n  }\n\n  if (totalPages <= 10) {\n    paginationMarkup = MARKUP.totalPagesLessThanTenPagination(page, totalPages);\n    return createPaginationMarkup(paginationMarkup);\n  }\n\n  if (totalPages === page || page > totalPages - 8) {\n    paginationMarkup = MARKUP.lastPagesPagination(page, totalPages);\n    return createPaginationMarkup(paginationMarkup);\n  }\n\n  if (page === 1 || page < 9) {\n    paginationMarkup = MARKUP.pageLessThanNine(page);\n    return createPaginationMarkup(paginationMarkup);\n  }\n\n  if (visible) {\n    refs.prevButton.dataset.page = page - 1;\n    refs.nextButton.dataset.page = page + 1;\n    return;\n  }\n\n  if (page > 9 || page < totalPages - 8) {\n    paginationMarkup = MARKUP.betweenFirstAndLastPages(page, totalPages);\n    return createPaginationMarkup(paginationMarkup);\n  }\n}\n\nfunction createPaginationMarkup(paginationMarkup) {\n  refs.paginationList.innerHTML = '';\n  refs.paginationList.insertAdjacentHTML('beforeend', paginationMarkup);\n\n  refs.buttons = document.querySelectorAll('.pagination-button');\n  refs.prevButton = document.querySelector(\n    '.pagination-item:first-child button'\n  );\n  refs.nextButton = document.querySelector(\n    '.pagination-item:last-child button'\n  );\n}\n","export function onePagePagination() {\n  return `<li class=\"pagination-item\">\n      <button class=\"pagination-button active\" type=\"button\" data-page=\"1\">1</button>\n    </li>`;\n}\n\nexport function totalPagesLessThanTenPagination(page, totalPages) {\n  let markup = [];\n  for (let i = 1; i <= totalPages; i += 1) {\n    markup.push(`<li class=\"pagination-item\">\n      <button class=\"pagination-button ${\n        i === 1 ? 'active' : ''\n      }\" type=\"button\" data-page=\"${i}\">${i}</button>\n    </li>`);\n  }\n  return `<li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"${\n        page - 1\n      }\" disabled=\"true\">&#65124</button></li> \n      ${markup.join('')}\n      <li class=\"pagination-item\">\n      ${\n        totalPages !== 1\n          ? `<button class=\"pagination-button\" type=\"button\" data-page=\"${\n              page + 1\n            }\">&#65125</button></li>`\n          : ''\n      }`;\n}\n\nexport function lastPagesPagination(page, totalPages) {\n  let markup = [];\n  for (let i = 7; i >= 1; i -= 1) {\n    markup.push(`<li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"${\n        totalPages - i\n      }\">${totalPages - i}</button>\n    </li>`);\n  }\n  return ` \n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"${\n        page - 1\n      }\" disabled=\"true\">&#65124</button></li>\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button active pagination-dots\" type=\"button\" data-page=\"${\n        totalPages - 8\n      }\">...</button>\n    </li>\n    ${markup.join('')}\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"${totalPages}\">${totalPages}</button>\n    </li>\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"${\n        page + 1\n      }\">&#65125</button></li>`;\n}\n\nexport function pageLessThanNine(page) {\n  let markup = [];\n  for (let i = 1; i <= 8; i += 1) {\n    markup.push(`<li class=\"pagination-item\">\n      <button class=\"pagination-button ${\n        i === 1 ? ' active' : ''\n      }\" type=\"button\" data-page=\"${i}\">${i}</button>\n    </li>`);\n  }\n  return ` \n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"${\n        page - 1\n      }\" disabled=\"true\">&#65124</button></li>\n      ${markup.join('')}\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button pagination-dots\" type=\"button\" data-page=\"9\">...</button>\n    </li>\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"${\n        page + 1\n      }\">&#65125</button></li>`;\n}\n\nexport function betweenFirstAndLastPages(page, totalPages) {\n  let markup = [];\n  let lastVisiblePage = page + 4;\n\n  for (let i = page; i <= lastVisiblePage; i += 1) {\n    markup.push(`<li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-visible=\"true\" data-page=\"${i}\">${i}</button>\n    </li>`);\n  }\n  return `\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"${\n        page - 1\n      }\" >&#65124</button></li>\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"1\">1</button>\n    </li>\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button pagination-dots\" type=\"button\" data-page=\"${\n        page - 5\n      }\">...</button>\n    </li>\n    ${markup.join('')}\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button pagination-dots\" type=\"button\" data-page=\"${\n        page + 5\n      }\">...</button>\n    </li>\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"${totalPages}\">${totalPages}</button>\n    </li>\n    <li class=\"pagination-item\">\n      <button class=\"pagination-button\" type=\"button\" data-page=\"${\n        page + 1\n      }\">&#65125</button>\n    </li>\n  `;\n}\n"],"names":["$94aaf10e6bfe0334$export$2e2bcd8739ae039","form","document","querySelector","moviesList","paginationList","buttons","querySelectorAll","prevButton","nextButton","$8a54098b6528a565$export$e53703e81543c3b4","movies","map","original_title","poster_path","join","$1f0dc3b9307be026$var$page","$1f0dc3b9307be026$var$query","$1f0dc3b9307be026$var$totalPages","async","$1f0dc3b9307be026$var$fetchMovies","query1","page1","response","fetch","json","total_pages","console","log","results","$1f0dc3b9307be026$var$changePaginationMarkup","page2","visible","paginationMarkup","$1f0dc3b9307be026$var$createPaginationMarkup","page","totalPages","markup","i","push","$4d2b3ba7ef182bde$export$55d9aebea3831d11","$4d2b3ba7ef182bde$export$87ca905a176bcdcb","$4d2b3ba7ef182bde$export$acdd6fc5a69c298c","dataset","lastVisiblePage","$4d2b3ba7ef182bde$export$693eb906ae7d5a97","innerHTML","insertAdjacentHTML","then","addEventListener","e","preventDefault","value","currentTarget","elements","query","trim","alert","reset","currentPage","Number","target","removeAttribute","setAttribute","forEach","el","classList","remove","textContent","add"],"version":3,"file":"index.456e9531.js.map"}