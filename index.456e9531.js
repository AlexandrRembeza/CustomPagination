var t={form:document.querySelector(".form"),moviesList:document.querySelector(".movies-list"),paginationList:document.querySelector(".pagination-list"),buttons:document.querySelectorAll(".pagination-button"),prevButton:document.querySelector(".pagination-item:first-child button"),nextButton:document.querySelector(".pagination-item:last-child button")};function n(t){return t.map((({original_title:t,poster_path:n})=>`\n      <li class="movies-item">\n        ${n?`<div class="movie-item__image-wrap">                         \n                <img class="movie-item__image" src="https://www.themoviedb.org/t/p/w780${n}" loading="lazy" alt="${t}" />\n            </div>`:'<div class="movie-item__placeholder">\n                <svg class="movie-item__placeholder-image" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\n                    <title>image</title>\n                    <g id="icomoon-ignore">\n                    </g>\n                    <path d="M479.942 64c0.020 0.017 0.041 0.038 0.058 0.058v383.885c-0.017 0.020-0.038 0.041-0.058 0.058h-447.885c-0.020-0.017-0.041-0.038-0.057-0.058v-383.886c0.017-0.020 0.038-0.041 0.057-0.057h447.885zM480 32h-448c-17.6 0-32 14.4-32 32v384c0 17.6 14.4 32 32 32h448c17.6 0 32-14.4 32-32v-384c0-17.6-14.4-32-32-32v0z"></path>\n                    <path d="M416 144c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48z"></path>\n                    <path d="M448 416h-384v-64l112-192 128 160h32l112-96z"></path>\n                </svg>     \n           </div>'}\n        <p>${t}</p>\n      </li>\n    `)).join("")}let a=1,i="war",e=0;async function o(t,n){const a=await fetch(`https://api.themoviedb.org/3/search/movie?api_key=6308d1a98819d8ffdd4916cbcea5cd95&language=en-US&page=${n}&query=${t}`),i=await a.json();if(e=i.total_pages,0!==e)return console.log(i),i.results}function s(n,a){let i="";return 1===e?(i='<li class="pagination-item">\n      <button class="pagination-button active" type="button" data-page="1">1</button>\n    </li>',u(i)):e<=10?(i=function(t,n){let a=[];for(let t=1;t<=n;t+=1)a.push(`<li class="pagination-item">\n      <button class="pagination-button ${1===t?"active":""}" type="button" data-page="${t}">${t}</button>\n    </li>`);return`<li class="pagination-item">\n      <button class="pagination-button" type="button" data-page="${t-1}" disabled="true">&#65124</button></li> \n      ${a.join("")}\n      <li class="pagination-item">\n      ${1!==n?`<button class="pagination-button" type="button" data-page="${t+1}">&#65125</button></li>`:""}`}(n,e),u(i)):e===n||n>e-8?(i=function(t,n){let a=[];for(let t=7;t>=1;t-=1)a.push(`<li class="pagination-item">\n      <button class="pagination-button" type="button" data-page="${n-t}">${n-t}</button>\n    </li>`);return` \n    <li class="pagination-item">\n      <button class="pagination-button" type="button" data-page="${t-1}" disabled="true">&#65124</button></li>\n    <li class="pagination-item">\n      <button class="pagination-button active pagination-dots" type="button" data-page="${n-8}">...</button>\n    </li>\n    ${a.join("")}\n    <li class="pagination-item">\n      <button class="pagination-button" type="button" data-page="${n}">${n}</button>\n    </li>\n    <li class="pagination-item">\n      <button class="pagination-button" type="button" data-page="${t+1}">&#65125</button></li>`}(n,e),u(i)):1===n||n<9?(i=function(t){let n=[];for(let t=1;t<=8;t+=1)n.push(`<li class="pagination-item">\n      <button class="pagination-button ${1===t?" active":""}" type="button" data-page="${t}">${t}</button>\n    </li>`);return` \n    <li class="pagination-item">\n      <button class="pagination-button" type="button" data-page="${t-1}" disabled="true">&#65124</button></li>\n      ${n.join("")}\n    <li class="pagination-item">\n      <button class="pagination-button pagination-dots" type="button" data-page="9">...</button>\n    </li>\n    <li class="pagination-item">\n      <button class="pagination-button" type="button" data-page="${t+1}">&#65125</button></li>`}(n),u(i)):a?(t.prevButton.dataset.page=n-1,void(t.nextButton.dataset.page=n+1)):n>9||n<e-8?(i=function(t,n){let a=[],i=t+4;for(let n=t;n<=i;n+=1)a.push(`<li class="pagination-item">\n      <button class="pagination-button" type="button" data-visible="true" data-page="${n}">${n}</button>\n    </li>`);return`\n    <li class="pagination-item">\n      <button class="pagination-button" type="button" data-page="${t-1}" >&#65124</button></li>\n    <li class="pagination-item">\n      <button class="pagination-button" type="button" data-page="1">1</button>\n    </li>\n    <li class="pagination-item">\n      <button class="pagination-button pagination-dots" type="button" data-page="${t-5}">...</button>\n    </li>\n    ${a.join("")}\n    <li class="pagination-item">\n      <button class="pagination-button pagination-dots" type="button" data-page="${t+5}">...</button>\n    </li>\n    <li class="pagination-item">\n      <button class="pagination-button" type="button" data-page="${n}">${n}</button>\n    </li>\n    <li class="pagination-item">\n      <button class="pagination-button" type="button" data-page="${t+1}">&#65125</button>\n    </li>\n  `}(n,e),u(i)):void 0}function u(n){t.paginationList.innerHTML="",t.paginationList.insertAdjacentHTML("beforeend",n),t.buttons=document.querySelectorAll(".pagination-button"),t.prevButton=document.querySelector(".pagination-item:first-child button"),t.nextButton=document.querySelector(".pagination-item:last-child button")}o(i,a).then((a=>{t.moviesList.insertAdjacentHTML("beforeend",n(a)),e<=10&&s(1,!1)})),t.form.addEventListener("submit",(async function(u){u.preventDefault();const l=u.currentTarget.elements.query.value.trim();if(l===i)return alert("Equal request");a=1;const p=await o(l,a);if(0===e)return t.form.reset(),alert("No results");i=l,t.moviesList.innerHTML="";const c=await n(p);t.moviesList.insertAdjacentHTML("beforeend",c),s(a,!1),t.form.reset()})),t.paginationList.addEventListener("click",(async function(u){u.preventDefault();const l=Number(u.target.dataset.page);if(l===a)return;console.log(l),a=l;const p=await o(i,a);t.moviesList.innerHTML="";const c=await n(p);t.moviesList.insertAdjacentHTML("beforeend",c);const b=!!u.target.dataset.visible;s(a,b),a>1&&t.prevButton.removeAttribute("disabled");a===e?t.nextButton.setAttribute("disabled",!0):t.nextButton.removeAttribute("disabled");t.buttons.forEach((t=>t.classList.remove("active"))),t.buttons.forEach((t=>{l===Number(t.dataset.page)&&Number(t.textContent)&&t.classList.add("active")}))}));
//# sourceMappingURL=index.456e9531.js.map
